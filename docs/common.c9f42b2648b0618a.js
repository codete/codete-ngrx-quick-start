"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[592],{239:(K,M,f)=>{f.d(M,{Qi:()=>N});var o=f(25803),n=f(5311),h=f(98087),O=f(58784);const m="@ngrx/router-store/request",g=((0,o.PH)(m,(0,o.Ky)()),"@ngrx/router-store/navigation"),p=((0,o.PH)(g,(0,o.Ky)()),"@ngrx/router-store/cancel"),S=((0,o.PH)(p,(0,o.Ky)()),"@ngrx/router-store/error"),v=((0,o.PH)(S,(0,o.Ky)()),"@ngrx/router-store/navigated");(0,o.PH)(v,(0,o.Ky)());class A{}class _{serialize(e){return{root:this.serializeRoute(e.root),url:e.url}}serializeRoute(e){const t=e.children.map(i=>this.serializeRoute(i));return{params:e.params,paramMap:e.paramMap,data:e.data,url:e.url,outlet:e.outlet,routeConfig:e.routeConfig?{component:e.routeConfig.component,path:e.routeConfig.path,pathMatch:e.routeConfig.pathMatch,redirectTo:e.routeConfig.redirectTo,outlet:e.routeConfig.outlet}:null,queryParams:e.queryParams,queryParamMap:e.queryParamMap,fragment:e.fragment,component:e.routeConfig?e.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:t[0],pathFromRoot:void 0,children:t}}}class C{serialize(e){return{root:this.serializeRoute(e.root),url:e.url}}serializeRoute(e){const t=e.children.map(i=>this.serializeRoute(i));return{params:e.params,data:e.data,url:e.url,outlet:e.outlet,routeConfig:e.routeConfig?{path:e.routeConfig.path,pathMatch:e.routeConfig.pathMatch,redirectTo:e.routeConfig.redirectTo,outlet:e.routeConfig.outlet}:null,queryParams:e.queryParams,fragment:e.fragment,firstChild:t[0],children:t}}}var R=(()=>{return(r=R||(R={}))[r.PreActivation=1]="PreActivation",r[r.PostActivation=2]="PostActivation",R;var r})();const y=new n.OlP("@ngrx/router-store Internal Configuration"),P=new n.OlP("@ngrx/router-store Configuration");function U(r){return Object.assign({stateKey:"router",serializer:C,navigationActionTiming:R.PreActivation},r)}var c=(()=>{return(r=c||(c={}))[r.NONE=1]="NONE",r[r.ROUTER=2]="ROUTER",r[r.STORE=3]="STORE",c;var r})();let N=(()=>{class r{constructor(t,i,a,d,E,l){this.store=t,this.router=i,this.serializer=a,this.errorHandler=d,this.config=E,this.activeRuntimeChecks=l,this.lastEvent=null,this.routerState=null,this.trigger=c.NONE,this.stateKey=this.config.stateKey,!(0,o.rM)()&&(0,n.X6Q)()&&((null==l?void 0:l.strictActionSerializability)||(null==l?void 0:l.strictStateSerializability))&&this.serializer instanceof _&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the DefaultRouterStateSerializer. The default serializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer. This also applies to Ivy with immutability runtime checks."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}static forRoot(t={}){return{ngModule:r,providers:[{provide:y,useValue:t},{provide:P,useFactory:U,deps:[y]},{provide:A,useClass:t.serializer?t.serializer:0===t.routerState?_:C}]}}setUpStoreStateListener(){this.store.pipe((0,o.Ys)(this.stateKey),(0,O.M)(this.store)).subscribe(([t,i])=>{this.navigateIfNeeded(t,i)})}navigateIfNeeded(t,i){if(!t||!t.state||this.trigger===c.ROUTER||this.lastEvent instanceof h.OD)return;const a=t.state.url;(function L(r,e){return z(r)===z(e)})(this.router.url,a)||(this.storeState=i,this.trigger=c.STORE,this.router.navigateByUrl(a).catch(d=>{this.errorHandler.handleError(d)}))}setUpRouterEventsListener(){const t=this.config.navigationActionTiming===R.PostActivation;let i;this.router.events.pipe((0,O.M)(this.store)).subscribe(([a,d])=>{this.lastEvent=a,a instanceof h.OD?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==c.STORE&&(this.storeState=d,this.dispatchRouterRequest(a))):a instanceof h.R9?(i=a,!t&&this.trigger!==c.STORE&&this.dispatchRouterNavigation(a)):a instanceof h.gk?(this.dispatchRouterCancel(a),this.reset()):a instanceof h.Q3?(this.dispatchRouterError(a),this.reset()):a instanceof h.m2&&(this.trigger!==c.STORE&&(t&&this.dispatchRouterNavigation(i),this.dispatchRouterNavigated(a)),this.reset())})}dispatchRouterRequest(t){this.dispatchRouterAction(m,{event:t})}dispatchRouterNavigation(t){const i=this.serializer.serialize(t.state);this.dispatchRouterAction(g,{routerState:i,event:new h.R9(t.id,t.url,t.urlAfterRedirects,i)})}dispatchRouterCancel(t){this.dispatchRouterAction(p,{storeState:this.storeState,event:t})}dispatchRouterError(t){this.dispatchRouterAction(S,{storeState:this.storeState,event:new h.Q3(t.id,t.url,`${t}`)})}dispatchRouterNavigated(t){const i=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(v,{event:t,routerState:i})}dispatchRouterAction(t,i){this.trigger=c.ROUTER;try{this.store.dispatch({type:t,payload:Object.assign(Object.assign({routerState:this.routerState},i),{event:0===this.config.routerState?i.event:{id:i.event.id,url:i.event.url,urlAfterRedirects:i.event.urlAfterRedirects}})})}finally{this.trigger=c.NONE}}reset(){this.trigger=c.NONE,this.storeState=null,this.routerState=null}}return r.\u0275fac=function(t){return new(t||r)(n.LFG(o.yh),n.LFG(h.F0),n.LFG(A),n.LFG(n.qLn),n.LFG(P),n.LFG(o.hg))},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({}),r})();function z(r){return(null==r?void 0:r.length)>0&&"/"===r[r.length-1]?r.substring(0,r.length-1):r}}}]);