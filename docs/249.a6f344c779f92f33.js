"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[249],{7249:(Cs,R,i)=>{i.r(R),i.d(R,{SimpleTasksAppComponent:()=>N,SimpleTasksAppModule:()=>fs});var s=i(38687),T=i(61941),n=i(51252);const F="simpleTasks",H=(0,n.ZF)(F),J=(0,n.P1)(H,t=>t.simpleTasks.map(o=>T.HL.from(o))),f=(0,n.P1)(H,t=>t.loveFirst),O=(0,n.PH)("[simple-tasks] INIT"),U=(0,n.PH)("[simple-tasks] FETCH_ALL_TASKS"),A=(0,n.PH)("[simple-tasks] FETCH_ALL_TASKS_SUCCESS",(0,n.Ky)()),I=(0,n.PH)("[simple-tasks] FETCH_ALL_TASKS_ERROR",(0,n.Ky)()),Z=(0,n.PH)("[simple-tasks] ADD_TASK",(0,n.Ky)()),_=(0,n.PH)("[simple-tasks] ADD_TASK_SUCCESS",(0,n.Ky)()),G=(0,n.PH)("[simple-tasks] ADD_TASK_ERROR",(0,n.Ky)()),D=(0,n.PH)("[simple-tasks] DELETE_TASK",(0,n.Ky)()),M=(0,n.PH)("[simple-tasks] DELETE_TASK_SUCCESS",(0,n.Ky)()),w=(0,n.PH)("[simple-tasks] DELETE_TASK_ERROR",(0,n.Ky)()),C=(0,n.PH)("[simple-tasks] LOVE_TASK",(0,n.Ky)()),B=(0,n.PH)("[simple-tasks] LOVE_TASK_SUCCESS",(0,n.Ky)()),V=(0,n.PH)("[simple-tasks] LOVE_TASK_ERROR",(0,n.Ky)()),y=(0,n.PH)("[simple-tasks] UNLOVE_TASK",(0,n.Ky)()),Q=(0,n.PH)("[simple-tasks] UNLOVE_TASK_SUCCESS",(0,n.Ky)()),z=(0,n.PH)("[simple-tasks] UNLOVE_TASK_ERROR",(0,n.Ky)()),K=(0,n.PH)("[simple-tasks] ORDER_LOVE_FIRST",(0,n.Ky)()),P=(0,n.PH)("[simple-tasks] REALTIME_CHANGES_SUBSCRIBE",(0,n.Ky)());(0,n.PH)("[simple-tasks] REALTIME_CHANGES_NEW_DATA",(0,n.Ky)());var W=i(55400),g=i(8092),h=i(18205),k=i(76707),Y=i(11102),X=i(48095),j=i(31888),q=i(25290),ss=i(96834),v=i(8193);function ts(t,o){if(1&t){const e=s.EpF();s.TgZ(0,"column",6)(1,"button",8),s.NdJ("click",function(){s.CHM(e);const p=s.oxw().$implicit,r=s.oxw();return s.KtG(r.love(p))}),s.TgZ(2,"mat-icon"),s._uU(3," favorite_border "),s.qZA()()()}2&t&&s.Q6J("width",50)}function es(t,o){if(1&t){const e=s.EpF();s.TgZ(0,"column",6)(1,"button",9),s.NdJ("click",function(){s.CHM(e);const p=s.oxw().$implicit,r=s.oxw();return s.KtG(r.unlove(p))}),s.TgZ(2,"mat-icon"),s._uU(3," favorite "),s.qZA()()()}2&t&&s.Q6J("width",50)}function ns(t,o){if(1&t){const e=s.EpF();s.TgZ(0,"columns-container")(1,"column",3)(2,"mat-form-field"),s._UZ(3,"input",4),s.qZA()(),s.YNc(4,ts,4,1,"column",5),s.YNc(5,es,4,1,"column",5),s.TgZ(6,"column",6)(7,"button",7),s.NdJ("click",function(){const r=s.CHM(e).$implicit,a=s.oxw();return s.KtG(a.remove(r))}),s.TgZ(8,"mat-icon"),s._uU(9," delete_forever "),s.qZA()()()()}if(2&t){const e=o.$implicit,l=o.index;s.xp6(3),s.s9C("value",l+1+". "+e.content),s.Q6J("disabled",!0),s.xp6(1),s.Q6J("ngIf",!e.love),s.xp6(1),s.Q6J("ngIf",e.love),s.xp6(1),s.Q6J("width",50)}}let os=(()=>{class t{constructor(e){this.store=e,this.destroy$=new W.x,this.simpleTasks$=this.store.select(J),this.loveFirstChecked$=this.store.select(f),this.store.dispatch(O())}ngOnInit(){this.store.dispatch(P({destroy$:g.ZH.ng.serialize(this.destroy$)}))}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.unsubscribe(),g.ZH.ng.unsubscribe(this.destroy$)}newTask(e){this.store.dispatch(Z({task:T.HL.from(e.target.value)})),e.target.value=""}remove(e){this.store.dispatch(D({task:e}))}orderLoveFirst(e){this.store.dispatch(K({loveFirst:e.checked}))}love(e){this.store.dispatch(C({task:e}))}unlove(e){this.store.dispatch(y({task:e}))}trackByMethod(e,l){return l.id}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(n.yh))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-simple-tasks"]],decls:17,vars:7,consts:[[3,"checked","change"],[4,"ngFor","ngForOf","ngForTrackBy"],["matInput","","placeholder","Type your task and press 'ENTER'...",3,"keydown.enter"],["grow",""],["matInput","",3,"value","disabled"],[3,"width",4,"ngIf"],[3,"width"],["mat-icon-button","",1,"delete",3,"click"],["mat-icon-button","",1,"favorite_border",3,"click"],["mat-icon-button","",1,"favorite",3,"click"]],template:function(e,l){1&e&&(s.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),s._uU(3,"Simple tasks"),s.qZA(),s.TgZ(4,"mat-card-subtitle"),s._uU(5,"with realtime/socket syncing"),s.qZA()(),s.TgZ(6,"mat-card-content"),s._UZ(7,"br"),s.TgZ(8,"mat-slide-toggle",0),s.NdJ("change",function(r){return l.orderLoveFirst(r)}),s.ALo(9,"async"),s._uU(10,"Love first!"),s.qZA(),s._UZ(11,"br")(12,"br"),s.YNc(13,ns,10,5,"columns-container",1),s.ALo(14,"async"),s.TgZ(15,"mat-form-field")(16,"input",2),s.NdJ("keydown.enter",function(r){return l.newTask(r)}),s.qZA()()()()),2&e&&(s.xp6(8),s.Q6J("checked",s.lcZ(9,3,l.loveFirstChecked$)),s.xp6(5),s.Q6J("ngForOf",s.lcZ(14,5,l.simpleTasks$))("ngForTrackBy",l.trackByMethod))},dependencies:[h.sg,h.O5,k.a8,k.dn,k.dk,k.$j,k.n5,Y.Nt,X.KE,j.RK,q.Hw,ss.Rr,v.a_,v.bg,v.iB,h.Ov],styles:["button[mat-icon-button][_ngcontent-%COMP%]{color:gray}mat-card-title[_ngcontent-%COMP%]{color:gray}mat-card-subtitle[_ngcontent-%COMP%]{color:#789}mat-form-field[_ngcontent-%COMP%]{width:calc(100% - 10px)}"]}),t})(),N=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-simple-tasks-app"]],decls:1,vars:0,template:function(e,l){1&e&&s._UZ(0,"app-simple-tasks")},dependencies:[os]}),t})();var is=i(42363),c=i(70426),$=i(26332);const ls=(0,n.Lq)({loggedUser:""});var L=i(40409);const ps=(0,n.Lq)({simpleTasks:[],loveFirst:!1},(0,n.on)(A,(t,{simpleTasks:o})=>({...t,simpleTasks:L.cloneDeep(o)})),(0,n.on)(_,(t,{task:o})=>({...t,simpleTasks:[...t.simpleTasks,o]})),(0,n.on)(M,(t,{task:o})=>({...t,simpleTasks:[...t.simpleTasks.filter(e=>e.id!==o.id)]})),(0,n.on)(K,(t,{loveFirst:o})=>({...t,simpleTasks:[...t.simpleTasks],loveFirst:o})),(0,n.on)(C,(t,{task:o})=>{const e=L.cloneDeep(t.simpleTasks);return e.find(({id:p})=>o.id===p).love=!0,{...t,simpleTasks:e}}),(0,n.on)(y,(t,{task:o})=>{const e=L.cloneDeep(t.simpleTasks);return e.find(({id:p})=>o.id===p).love=!1,{...t,simpleTasks:e}}));var d=i(61831),u=i(38689),b=i(3931),m=i(52779),E=i(75921),ms=i(82045),Ts=i(57267),ds=i(88143),us=i(40873),Ss=i(25908);let x=(()=>{class t{constructor(e){this.taskBar=e,this.ctrl=T.HL.ctrl}handleError(e){this.taskBar.open(e?.message)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(Ss.ux))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();var hs=i(69530);let ks=(()=>{class t{constructor(e,l,p){this.actions$=e,this.service=l,this.store=p,this.init=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(O),(0,d.w)(()=>(0,u.of)(U())))),this.fetchAllTasks=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(U,K),(0,b.M)(this.store.select(f)),(0,d.w)(([r,a])=>this.service.ctrl.getAll(a).received.observable.pipe((0,m.U)(S=>A({simpleTasks:S.body.rawJson})),(0,E.K)(S=>(this.service.handleError(S),(0,u.of)(I({error:S})))))))),this.addTask=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(Z),(0,d.w)(({task:r})=>this.service.ctrl.create(r).received.observable.pipe((0,m.U)(a=>_({task:a.body.rawJson})),(0,E.K)(a=>(this.service.handleError(a),(0,u.of)(G({error:a})))))))),this.deleteTask=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(D),(0,d.w)(({task:r})=>this.service.ctrl.deleteById(r.id).received.observable.pipe((0,m.U)(a=>M({task:a.body.rawJson})),(0,E.K)(a=>(this.service.handleError(a),(0,u.of)(w({error:a})))))))),this.loveTask=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(C),(0,d.w)(({task:r})=>this.service.ctrl.updateLove(r.id,!0).received.observable.pipe((0,m.U)(a=>B({task:a.body.rawJson})),(0,E.K)(a=>(this.service.handleError(a),(0,u.of)(V({error:a})))))))),this.unloveTask=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(y),(0,d.w)(({task:r})=>this.service.ctrl.updateLove(r.id,!1).received.observable.pipe((0,m.U)(a=>Q({task:a.body.rawJson})),(0,E.K)(a=>(this.service.handleError(a),(0,u.of)(z({error:a})))))))),this.realtimeChanges=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(P),(0,ms.z)(r=>hs.iQ.Realtime.Browser.listenChangesTableEntity(T.HL).pipe((0,Ts.R)(g.ZH.ng.deserialize(r.destroy$)),(0,ds.b)(500),(0,b.M)(this.store.select(f)),(0,us.z)(([a,S])=>this.service.ctrl.getAll(S).received.observable.pipe((0,m.U)(As=>As.body.rawJson))),(0,m.U)(a=>A({simpleTasks:a}))))))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(c.eX),s.LFG(x),s.LFG(n.yh))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),vs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[x],imports:[h.ez,T.qX,$.u5,v.m0,n.Aw.forFeature(F,ps),c.sQ.forFeature([ks])]}),t})();const Es=[{path:"",component:N}];let fs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[h.ez,T.qX,$.u5,v.m0,n.Aw.forFeature("simple-tasks-app",ls),c.sQ.forFeature([]),is.Bz.forChild(Es),vs]}),t})()}}]);