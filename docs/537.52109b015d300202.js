"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[537],{80537:(vt,C,S)=>{S.r(C),S.d(C,{TasksAppModule2:()=>Ut});var N=S(18205),c=S(38687),z=S(32860);let J=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=c.Xpm({type:s,selectors:[["app-tasks"]],decls:1,vars:0,template:function(t,n){1&t&&c._UZ(0,"app-tasks-engine")},dependencies:[z.A],encapsulation:2}),s})(),Y=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=c.Xpm({type:s,selectors:[["app-tasks-app"]],decls:1,vars:0,template:function(t,n){1&t&&c._UZ(0,"app-tasks")},dependencies:[J]}),s})();var A=S(17314),e=S(51252),i=S(70426),u=S(40409);const y=(0,e.PH)("[tasks] INIT"),m=(0,e.PH)("[tasks] TOOGLE_SUBTASKS_MENU",(0,e.Ky)()),D=(0,e.PH)("[tasks] FETCH_TASKS"),b=(0,e.PH)("[tasks] FETCH_TASKS_SUCCESS",(0,e.Ky)()),x=(0,e.PH)("[tasks] FETCH_TASKS_ERROR",(0,e.Ky)()),R=(0,e.PH)("[tasks] ADD_TASK",(0,e.Ky)()),H=(0,e.PH)("[tasks] ADD_TASK_SUCCESS",(0,e.Ky)()),X=(0,e.PH)("[tasks] ADD_TASK_ERROR",(0,e.Ky)()),h=((0,e.PH)("[tasks] UPDATE_TASK",(0,e.Ky)()),(0,e.PH)("[tasks] UPDATE_TASK_SUCCESS",(0,e.Ky)())),V=(0,e.PH)("[tasks] UPDATE_TASK_ERROR",(0,e.Ky)()),P=(0,e.PH)("[tasks] DELETE_TASK",(0,e.Ky)()),g=(0,e.PH)("[tasks] DELETE_TASK_SUCCESS",(0,e.Ky)()),q=(0,e.PH)("[tasks] DELETE_TASK_ERROR",(0,e.Ky)()),st=(0,e.Lq)({tasks:[]},(0,e.on)(b,(s,{tasks:r})=>({...s,tasks:u.cloneDeep(r)})),(0,e.on)(m,(s,{task:r})=>{const t=u.cloneDeep(s);return t.tasks=t.tasks.map(n=>(n.selected=n.id===r.id&&!r.selected,n)),{...s,...t}}),(0,e.on)(H,(s,{task:r})=>{const t=u.cloneDeep(s);return t.tasks.push(r),{...s,...t}}),(0,e.on)(h,(s,{task:r})=>{const t=u.cloneDeep(s);return t.tasks=t.tasks.map(n=>n.id===r.id?u.merge(n,r):n),{...s,...t}}),(0,e.on)(g,(s,{task:r})=>{const t=u.cloneDeep(s);return t.tasks=t.tasks.filter(n=>n.id!==r.id),{...s,...t}}));var E=S(61831),T=S(38689),l=S(52779),d=S(75921),U=S(40873),p=S(61941),k=S(28938);const f="tasks";let F=(()=>{class s{constructor(t){this.httpClient=t}getAll(){return k.ZH.isWebSQL?p.iQ.ctrl.getAll().received.observable.pipe((0,l.U)(t=>t.body.json)):this.httpClient.get(`${p.ho}/${f}/models`)}create(t){return k.ZH.isWebSQL?p.iQ.ctrl.create(t).received.observable.pipe((0,l.U)(n=>n.body.json)):this.httpClient.post(`${p.ho}/${f}/model`,t)}update(t){return k.ZH.isWebSQL?p.iQ.ctrl.updateById(t?.id,t).received.observable.pipe((0,l.U)(n=>n.body.json)):this.httpClient.put(`${p.ho}/${f}/model/${t.id}`,t)}delete(t){return k.ZH.isWebSQL?p.iQ.ctrl.deleteById(t?.id).received.observable.pipe((0,l.U)(n=>n.body.json)):this.httpClient.delete(`${p.ho}/${f}/model/${t.id}`)}}return s.\u0275fac=function(t){return new(t||s)(c.LFG(A.eN))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac}),s})(),B=(()=>{class s{constructor(t,n){this.actions$=t,this.service=n,this.init=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(y),(0,E.w)(()=>(0,T.of)(D())))),this.fetchTasks=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(D),(0,E.w)(()=>this.service.getAll().pipe((0,l.U)(a=>b({tasks:a})),(0,d.K)(a=>(0,T.of)(x({error:a}))))))),this.addTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(R),(0,U.z)(a=>this.service.create(a.task).pipe((0,l.U)(o=>H({task:o})),(0,d.K)(o=>(0,T.of)(X({error:o}))))))),this.updateTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(h),(0,U.z)(a=>this.service.update(a.task).pipe((0,l.U)(o=>h({task:o})),(0,d.K)(o=>(0,T.of)(V({error:o}))))))),this.deleteTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(P),(0,U.z)(a=>this.service.delete(a.task).pipe((0,l.U)(o=>g({task:o})),(0,d.K)(o=>(0,T.of)(q({error:o})))))))}}return s.\u0275fac=function(t){return new(t||s)(c.LFG(i.eX),c.LFG(F))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac}),s})();const L="tasks";var et=S(8571),v=S(666);const nt=(0,e.ZF)(L),rt=(0,e.P1)(nt,s=>s.tasks),$="subtasks",ot=(0,e.ZF)($),at=(0,e.P1)(ot,s=>s.subtasks),O=(0,e.PH)("[tasks] FETCH_SUBTASKS",(0,e.Ky)()),M=(0,e.PH)("[tasks] FETCH_SUBTASKS_SUCCESS",(0,e.Ky)()),it=(0,e.PH)("[tasks] FETCH_SUBTASKS_ERROR",(0,e.Ky)()),G=(0,e.PH)("[tasks] ADD_SUBTASK",(0,e.Ky)()),_=(0,e.PH)("[tasks] ADD_SUBTASK_SUCCESS",(0,e.Ky)()),ct=(0,e.PH)("[tasks] ADD_SUBTASK_ERROR",(0,e.Ky)()),W=(0,e.PH)("[tasks] UPDATE_SUBTASK",(0,e.Ky)()),w=(0,e.PH)("[tasks] UPDATE_SUBTASK_SUCCESS",(0,e.Ky)()),St=(0,e.PH)("[tasks] UPDATE_SUBTASK_ERROR",(0,e.Ky)()),I=(0,e.PH)("[tasks] DELETE_SUBTASK",(0,e.Ky)()),Q=(0,e.PH)("[tasks] DELETE_SUBTASK_SUCCESS",(0,e.Ky)()),pt=(0,e.PH)("[tasks] DELETE_SUBTASK_ERROR",(0,e.Ky)());let Z=(()=>{class s{constructor(t){this.store=t}helloWorld(){return"Hello from standard ngrx application"}title(){return(0,T.of)("TASKS (standard ngrx application)")}get isProcessingSubtaskRequestSelector(){return(0,T.of)(!1)}get isProcessingTaskRequestSelector(){return(0,T.of)(!1)}allTasksSelector(){return this.store.select(rt)}allSubtasks(t){return this.store.select(at)}synchonizationSateSelector(){return(0,T.of)("idle")}initAction(){var t=this;return(0,v.Z)(function*(){t.store.dispatch(y())})()}addTaskAction(t,n){var a=this;return(0,v.Z)(function*(){"Enter"===t.code&&(n.newTaskModel&&a.store.dispatch(R({task:{name:n.newTaskModel}})),n.newTaskModel="")})()}removeTaskAction(t){this.store.dispatch(P({task:{id:t}}))}onSaveTaskAction(t,n){n=u.cloneDeep(n),u.merge(n,t),this.store.dispatch(h({task:n}))}fetchSubtaskAction(t){var n=this;return(0,v.Z)(function*(){n.store.dispatch(O({taskId:t}))})()}addSubTaskAction(t,n){if(t.stopImmediatePropagation(),t.stopPropagation(),"Enter"===t.code&&n.tempSubtask){const a=p.Mp.from({name:n.tempSubtask,taskId:n.taskId}),o=u.cloneDeep(a);o&&Object.keys(o).length>0&&this.store.dispatch(G({subtask:o})),n.tempSubtask=""}}removeSubTaskAction(t){this.store.dispatch(I({subtask:t}))}onSaveSubTaskAction(t,n){this.store.dispatch(W({subtask:u.merge(u.clone(n),t)}))}toogleSubtasksAction(t,n,a){a.toogled=n,setTimeout(()=>{n.selected?a.drawer?.close():a.drawer?.open(),this.store.dispatch(m({task:n})),t.stopPropagation()})}}return s.\u0275fac=function(t){return new(t||s)(c.LFG(e.yh))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac}),s})();const lt=(0,e.Lq)({subtasks:[]},(0,e.on)(M,(s,{subtasks:r})=>({...s,subtasks:u.cloneDeep(r)})),(0,e.on)(_,(s,{subtask:r})=>{const t=u.cloneDeep(s);return t.subtasks.push(r),{...s,...t}}),(0,e.on)(w,(s,{subtask:r})=>{const t=u.cloneDeep(s);return t.subtasks=t.subtasks.map(n=>n.id===r.id?u.merge(n,r):n),{...s,...t}}),(0,e.on)(Q,(s,{subtask:r})=>{const t=u.cloneDeep(s);return t.subtasks=t.subtasks.filter(n=>n.id!==r.id),{...s,...t}})),K="subtasks";let j=(()=>{class s{constructor(t){this.httpClient=t}getAll(t){return k.ZH.isWebSQL?p.Mp.ctrl.getAll(t).received.observable.pipe((0,l.U)(n=>n.body.json)):this.httpClient.get(`${p.ho}/${K}/models?taskId=${t}`)}create(t){return k.ZH.isWebSQL?p.Mp.ctrl.create(t).received.observable.pipe((0,l.U)(n=>n.body.json)):this.httpClient.post(`${p.ho}/${K}/model`,t)}update(t){return k.ZH.isWebSQL?p.Mp.ctrl.updateById(t?.id,t).received.observable.pipe((0,l.U)(n=>n.body.json)):this.httpClient.put(`${p.ho}/${K}/model/${t.id}`,t)}delete(t){return k.ZH.isWebSQL?p.Mp.ctrl.deleteById(t?.id).received.observable.pipe((0,l.U)(n=>n.body.json)):this.httpClient.delete(`${p.ho}/${K}/model/${t.id}`)}}return s.\u0275fac=function(t){return new(t||s)(c.LFG(A.eN))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac}),s})(),Tt=(()=>{class s{constructor(t,n){this.actions$=t,this.service=n,this.fetchSubTasks=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(O),(0,E.w)(a=>this.service.getAll(a.taskId).pipe((0,l.U)(o=>M({subtasks:o})),(0,d.K)(o=>(0,T.of)(it({error:o}))))))),this.addSubTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(G),(0,E.w)(a=>this.service.create(a.subtask).pipe((0,l.U)(o=>_({subtask:o})),(0,d.K)(o=>(0,T.of)(ct({error:o}))))))),this.updateSubTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(W),(0,E.w)(a=>this.service.update(a.subtask).pipe((0,l.U)(o=>w({subtask:o})),(0,d.K)(o=>(0,T.of)(St({error:o}))))))),this.deleteSubTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(I),(0,E.w)(a=>this.service.delete(a.subtask).pipe((0,l.U)(o=>Q({subtask:o})),(0,d.K)(o=>(0,T.of)(pt({error:o})))))))}}return s.\u0275fac=function(t){return new(t||s)(c.LFG(i.eX),c.LFG(j))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac}),s})(),dt=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({providers:[j],imports:[A.JF,e.Aw.forFeature($,lt),i.sQ.forFeature([Tt])]}),s})();S(96607);let kt=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({providers:[B,F,Z],imports:[et.TasksEngineModule.forRoot({customEngineService:Z}),A.JF,e.Aw.forFeature(L,st),i.sQ.forFeature([B]),dt]}),s})();var Et=S(42363);const ft=(0,e.Lq)({loggedUser:""}),Kt=[{path:"",component:Y}];let Ut=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=c.oAB({type:s}),s.\u0275inj=c.cJS({imports:[N.ez,kt,e.Aw.forFeature("tasks-app",ft),i.sQ.forFeature([]),Et.Bz.forChild(Kt)]}),s})()}}]);