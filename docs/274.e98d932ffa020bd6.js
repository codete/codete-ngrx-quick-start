"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[274],{14274:(Ct,C,c)=>{c.r(C),c.d(C,{TasksAppModule2:()=>bt});var z=c(41380),S=c(60105),x=c(77444);let J=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=S.Xpm({type:s,selectors:[["app-tasks"]],decls:1,vars:0,template:function(t,n){1&t&&S._UZ(0,"app-tasks-engine")},directives:[x.A],encapsulation:2}),s})(),Y=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=S.Xpm({type:s,selectors:[["app-tasks-app"]],decls:1,vars:0,template:function(t,n){1&t&&S._UZ(0,"app-tasks")},directives:[J],styles:[""]}),s})();var k=c(54227),e=c(22051),i=c(27565),u=c(18801);const g=(0,e.PH)("[tasks] INIT"),y=(0,e.PH)("[tasks] TOOGLE_SUBTASKS_MENU",(0,e.Ky)()),m=(0,e.PH)("[tasks] FETCH_TASKS"),D=(0,e.PH)("[tasks] FETCH_TASKS_SUCCESS",(0,e.Ky)()),X=(0,e.PH)("[tasks] FETCH_TASKS_ERROR",(0,e.Ky)()),R=(0,e.PH)("[tasks] ADD_TASK",(0,e.Ky)()),H=(0,e.PH)("[tasks] ADD_TASK_SUCCESS",(0,e.Ky)()),V=(0,e.PH)("[tasks] ADD_TASK_ERROR",(0,e.Ky)()),f=((0,e.PH)("[tasks] UPDATE_TASK",(0,e.Ky)()),(0,e.PH)("[tasks] UPDATE_TASK_SUCCESS",(0,e.Ky)())),q=(0,e.PH)("[tasks] UPDATE_TASK_ERROR",(0,e.Ky)()),P=(0,e.PH)("[tasks] DELETE_TASK",(0,e.Ky)()),F=(0,e.PH)("[tasks] DELETE_TASK_SUCCESS",(0,e.Ky)()),tt=(0,e.PH)("[tasks] DELETE_TASK_ERROR",(0,e.Ky)()),et=(0,e.Lq)({tasks:[]},(0,e.on)(D,(s,{tasks:o})=>Object.assign(Object.assign({},s),{tasks:u.cloneDeep(o)})),(0,e.on)(y,(s,{task:o})=>{const t=u.cloneDeep(s);return t.tasks=t.tasks.map(n=>(n.selected=n.id===o.id&&!o.selected,n)),Object.assign(Object.assign({},s),t)}),(0,e.on)(H,(s,{task:o})=>{const t=u.cloneDeep(s);return t.tasks.push(o),Object.assign(Object.assign({},s),t)}),(0,e.on)(f,(s,{task:o})=>{const t=u.cloneDeep(s);return t.tasks=t.tasks.map(n=>n.id===o.id?u.merge(n,o):n),Object.assign(Object.assign({},s),t)}),(0,e.on)(F,(s,{task:o})=>{const t=u.cloneDeep(s);return t.tasks=t.tasks.filter(n=>n.id!==o.id),Object.assign(Object.assign({},s),t)}));var A=c(76808),d=c(4393),p=c(12777),T=c(12866),K=c(20761),l=c(24817),E=c(95991);const h="tasks";let O=(()=>{class s{constructor(t){this.httpClient=t}getAll(){return E.ZH.isWebSQL?l.iQ.ctrl.getAll().received.observable.pipe((0,p.U)(t=>t.body.json)):this.httpClient.get(`${l.ho}/${h}/models`)}create(t){return E.ZH.isWebSQL?l.iQ.ctrl.create(t).received.observable.pipe((0,p.U)(n=>n.body.json)):this.httpClient.post(`${l.ho}/${h}/model`,t)}update(t){return E.ZH.isWebSQL?l.iQ.ctrl.updateById(null==t?void 0:t.id,t).received.observable.pipe((0,p.U)(n=>n.body.json)):this.httpClient.put(`${l.ho}/${h}/model/${t.id}`,t)}delete(t){return E.ZH.isWebSQL?l.iQ.ctrl.deleteById(null==t?void 0:t.id).received.observable.pipe((0,p.U)(n=>n.body.json)):this.httpClient.delete(`${l.ho}/${h}/model/${t.id}`)}}return s.\u0275fac=function(t){return new(t||s)(S.LFG(k.eN))},s.\u0275prov=S.Yz7({token:s,factory:s.\u0275fac}),s})(),B=(()=>{class s{constructor(t,n){this.actions$=t,this.service=n,this.init=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(g),(0,A.w)(()=>(0,d.of)(m())))),this.fetchTasks=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(m),(0,A.w)(()=>this.service.getAll().pipe((0,p.U)(a=>D({tasks:a})),(0,T.K)(a=>(0,d.of)(X({error:a}))))))),this.addTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(R),(0,K.z)(a=>this.service.create(a.task).pipe((0,p.U)(r=>H({task:r})),(0,T.K)(r=>(0,d.of)(V({error:r}))))))),this.updateTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(f),(0,K.z)(a=>this.service.update(a.task).pipe((0,p.U)(r=>f({task:r})),(0,T.K)(r=>(0,d.of)(q({error:r}))))))),this.deleteTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(P),(0,K.z)(a=>this.service.delete(a.task).pipe((0,p.U)(r=>F({task:r})),(0,T.K)(r=>(0,d.of)(tt({error:r})))))))}}return s.\u0275fac=function(t){return new(t||s)(S.LFG(i.eX),S.LFG(O))},s.\u0275prov=S.Yz7({token:s,factory:s.\u0275fac}),s})();const L="tasks";var nt=c(45667),U=c(58485);const ot=(0,e.ZF)(L),rt=(0,e.P1)(ot,s=>s.tasks),$="subtasks",at=(0,e.ZF)($),it=(0,e.P1)(at,s=>s.subtasks),j=(0,e.PH)("[tasks] FETCH_SUBTASKS",(0,e.Ky)()),M=(0,e.PH)("[tasks] FETCH_SUBTASKS_SUCCESS",(0,e.Ky)()),ct=(0,e.PH)("[tasks] FETCH_SUBTASKS_ERROR",(0,e.Ky)()),G=(0,e.PH)("[tasks] ADD_SUBTASK",(0,e.Ky)()),W=(0,e.PH)("[tasks] ADD_SUBTASK_SUCCESS",(0,e.Ky)()),St=(0,e.PH)("[tasks] ADD_SUBTASK_ERROR",(0,e.Ky)()),Q=(0,e.PH)("[tasks] UPDATE_SUBTASK",(0,e.Ky)()),I=(0,e.PH)("[tasks] UPDATE_SUBTASK_SUCCESS",(0,e.Ky)()),lt=(0,e.PH)("[tasks] UPDATE_SUBTASK_ERROR",(0,e.Ky)()),Z=(0,e.PH)("[tasks] DELETE_SUBTASK",(0,e.Ky)()),_=(0,e.PH)("[tasks] DELETE_SUBTASK_SUCCESS",(0,e.Ky)()),ut=(0,e.PH)("[tasks] DELETE_SUBTASK_ERROR",(0,e.Ky)());let w=(()=>{class s{constructor(t){this.store=t}helloWorld(){return"Hello from standard ngrx application"}title(){return(0,d.of)("TASKS (standard ngrx application)")}get isProcessingSubtaskRequestSelector(){return(0,d.of)(!1)}get isProcessingTaskRequestSelector(){return(0,d.of)(!1)}allTasksSelector(){return this.store.select(rt)}allSubtasks(t){return this.store.select(it)}synchonizationSateSelector(){return(0,d.of)("idle")}initAction(){var t=this;return(0,U.Z)(function*(){t.store.dispatch(g())})()}addTaskAction(t,n){var a=this;return(0,U.Z)(function*(){"Enter"===t.code&&(n.newTaskModel&&a.store.dispatch(R({task:{name:n.newTaskModel}})),n.newTaskModel="")})()}removeTaskAction(t){this.store.dispatch(P({task:{id:t}}))}onSaveTaskAction(t,n){n=u.cloneDeep(n),u.merge(n,t),this.store.dispatch(f({task:n}))}fetchSubtaskAction(t){var n=this;return(0,U.Z)(function*(){n.store.dispatch(j({taskId:t}))})()}addSubTaskAction(t,n){if(t.stopImmediatePropagation(),t.stopPropagation(),"Enter"===t.code&&n.tempSubtask){const a=l.Mp.from({name:n.tempSubtask,taskId:n.taskId}),r=u.cloneDeep(a);r&&Object.keys(r).length>0&&this.store.dispatch(G({subtask:r})),n.tempSubtask=""}}removeSubTaskAction(t){this.store.dispatch(Z({subtask:t}))}onSaveSubTaskAction(t,n){this.store.dispatch(Q({subtask:u.merge(u.clone(n),t)}))}toogleSubtasksAction(t,n,a){a.toogled=n,setTimeout(()=>{var r,b;n.selected?null===(b=a.drawer)||void 0===b||b.close():null===(r=a.drawer)||void 0===r||r.open(),this.store.dispatch(y({task:n})),t.stopPropagation()})}}return s.\u0275fac=function(t){return new(t||s)(S.LFG(e.yh))},s.\u0275prov=S.Yz7({token:s,factory:s.\u0275fac}),s})();const dt=(0,e.Lq)({subtasks:[]},(0,e.on)(M,(s,{subtasks:o})=>Object.assign(Object.assign({},s),{subtasks:u.cloneDeep(o)})),(0,e.on)(W,(s,{subtask:o})=>{const t=u.cloneDeep(s);return t.subtasks.push(o),Object.assign(Object.assign({},s),t)}),(0,e.on)(I,(s,{subtask:o})=>{const t=u.cloneDeep(s);return t.subtasks=t.subtasks.map(n=>n.id===o.id?u.merge(n,o):n),Object.assign(Object.assign({},s),t)}),(0,e.on)(_,(s,{subtask:o})=>{const t=u.cloneDeep(s);return t.subtasks=t.subtasks.filter(n=>n.id!==o.id),Object.assign(Object.assign({},s),t)})),v="subtasks";let N=(()=>{class s{constructor(t){this.httpClient=t}getAll(t){return E.ZH.isWebSQL?l.Mp.ctrl.getAll(t).received.observable.pipe((0,p.U)(n=>n.body.json)):this.httpClient.get(`${l.ho}/${v}/models?taskId=${t}`)}create(t){return E.ZH.isWebSQL?l.Mp.ctrl.create(t).received.observable.pipe((0,p.U)(n=>n.body.json)):this.httpClient.post(`${l.ho}/${v}/model`,t)}update(t){return E.ZH.isWebSQL?l.Mp.ctrl.updateById(null==t?void 0:t.id,t).received.observable.pipe((0,p.U)(n=>n.body.json)):this.httpClient.put(`${l.ho}/${v}/model/${t.id}`,t)}delete(t){return E.ZH.isWebSQL?l.Mp.ctrl.deleteById(null==t?void 0:t.id).received.observable.pipe((0,p.U)(n=>n.body.json)):this.httpClient.delete(`${l.ho}/${v}/model/${t.id}`)}}return s.\u0275fac=function(t){return new(t||s)(S.LFG(k.eN))},s.\u0275prov=S.Yz7({token:s,factory:s.\u0275fac}),s})(),Tt=(()=>{class s{constructor(t,n){this.actions$=t,this.service=n,this.fetchSubTasks=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(j),(0,A.w)(a=>this.service.getAll(a.taskId).pipe((0,p.U)(r=>M({subtasks:r})),(0,T.K)(r=>(0,d.of)(ct({error:r}))))))),this.addSubTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(G),(0,A.w)(a=>this.service.create(a.subtask).pipe((0,p.U)(r=>W({subtask:r})),(0,T.K)(r=>(0,d.of)(St({error:r}))))))),this.updateSubTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(Q),(0,A.w)(a=>this.service.update(a.subtask).pipe((0,p.U)(r=>I({subtask:r})),(0,T.K)(r=>(0,d.of)(lt({error:r}))))))),this.deleteSubTask=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(Z),(0,A.w)(a=>this.service.delete(a.subtask).pipe((0,p.U)(r=>_({subtask:r})),(0,T.K)(r=>(0,d.of)(ut({error:r})))))))}}return s.\u0275fac=function(t){return new(t||s)(S.LFG(i.eX),S.LFG(N))},s.\u0275prov=S.Yz7({token:s,factory:s.\u0275fac}),s})(),Et=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=S.oAB({type:s}),s.\u0275inj=S.cJS({providers:[N],imports:[[k.JF,e.Aw.forFeature($,dt),i.sQ.forFeature([Tt])]]}),s})();c(9450);let At=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=S.oAB({type:s}),s.\u0275inj=S.cJS({providers:[B,O,w],imports:[[nt.TasksEngineModule.forRoot({customEngineService:w}),k.JF,e.Aw.forFeature(L,et),i.sQ.forFeature([B]),Et]]}),s})();var kt=c(26983),ft=c(7683),ht=c(87036);const Kt=(0,e.Lq)({loggedUser:""}),Ut=[{path:"",component:Y}];let bt=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=S.oAB({type:s}),s.\u0275inj=S.cJS({imports:[[z.ez,At,e.Aw.forRoot(Kt,{}),i.sQ.forRoot([]),ft.Qi.forRoot(),ht.FT.instrument({}),kt.Bz.forChild(Ut)]]}),s})()}}]);