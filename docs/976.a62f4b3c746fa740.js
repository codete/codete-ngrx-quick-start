"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[976],{59976:(ys,R,o)=>{o.r(R),o.d(R,{SimpleTasksAppComponent:()=>$,SimpleTasksAppModule:()=>As});var s=o(60105),T=o(24817),n=o(22051);const O="simpleTasks",F=(0,n.ZF)(O),P=(0,n.P1)(F,t=>t.simpleTasks.map(i=>T.HL.from(i))),f=(0,n.P1)(F,t=>t.loveFirst),H=(0,n.PH)("[simple-tasks] INIT"),U=(0,n.PH)("[simple-tasks] FETCH_ALL_TASKS"),A=(0,n.PH)("[simple-tasks] FETCH_ALL_TASKS_SUCCESS",(0,n.Ky)()),I=(0,n.PH)("[simple-tasks] FETCH_ALL_TASKS_ERROR",(0,n.Ky)()),b=(0,n.PH)("[simple-tasks] ADD_TASK",(0,n.Ky)()),Z=(0,n.PH)("[simple-tasks] ADD_TASK_SUCCESS",(0,n.Ky)()),j=(0,n.PH)("[simple-tasks] ADD_TASK_ERROR",(0,n.Ky)()),x=(0,n.PH)("[simple-tasks] DELETE_TASK",(0,n.Ky)()),D=(0,n.PH)("[simple-tasks] DELETE_TASK_SUCCESS",(0,n.Ky)()),B=(0,n.PH)("[simple-tasks] DELETE_TASK_ERROR",(0,n.Ky)()),g=(0,n.PH)("[simple-tasks] LOVE_TASK",(0,n.Ky)()),G=(0,n.PH)("[simple-tasks] LOVE_TASK_SUCCESS",(0,n.Ky)()),V=(0,n.PH)("[simple-tasks] LOVE_TASK_ERROR",(0,n.Ky)()),y=(0,n.PH)("[simple-tasks] UNLOVE_TASK",(0,n.Ky)()),w=(0,n.PH)("[simple-tasks] UNLOVE_TASK_SUCCESS",(0,n.Ky)()),Q=(0,n.PH)("[simple-tasks] UNLOVE_TASK_ERROR",(0,n.Ky)()),C=(0,n.PH)("[simple-tasks] ORDER_LOVE_FIRST",(0,n.Ky)()),N=(0,n.PH)("[simple-tasks] REALTIME_CHANGES_SUBSCRIBE",(0,n.Ky)());(0,n.PH)("[simple-tasks] REALTIME_CHANGES_NEW_DATA",(0,n.Ky)());var W=o(83070),L=o(56248),v=o(94235),z=o(53289),h=o(41380),k=o(16246),Y=o(52988),X=o(55831),q=o(55605),ss=o(52649);function ts(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"column",6)(1,"button",8),s.NdJ("click",function(){s.CHM(e);const p=s.oxw().$implicit;return s.oxw().love(p)}),s.TgZ(2,"mat-icon"),s._uU(3," favorite_border "),s.qZA()()()}2&t&&s.Q6J("width",50)}function es(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"column",6)(1,"button",9),s.NdJ("click",function(){s.CHM(e);const p=s.oxw().$implicit;return s.oxw().unlove(p)}),s.TgZ(2,"mat-icon"),s._uU(3," favorite "),s.qZA()()()}2&t&&s.Q6J("width",50)}function ns(t,i){if(1&t){const e=s.EpF();s.TgZ(0,"columns-container")(1,"column",3)(2,"mat-form-field"),s._UZ(3,"input",4),s.qZA()(),s.YNc(4,ts,4,1,"column",5),s.YNc(5,es,4,1,"column",5),s.TgZ(6,"column",6)(7,"button",7),s.NdJ("click",function(){const l=s.CHM(e).$implicit;return s.oxw().remove(l)}),s.TgZ(8,"mat-icon"),s._uU(9," delete_forever "),s.qZA()()()()}if(2&t){const e=i.$implicit,r=i.index;s.xp6(3),s.s9C("value",r+1+". "+e.content),s.Q6J("disabled",!0),s.xp6(1),s.Q6J("ngIf",!e.love),s.xp6(1),s.Q6J("ngIf",e.love),s.xp6(1),s.Q6J("width",50)}}let os=(()=>{class t{constructor(e){this.store=e,this.destroy$=new W.x,this.simpleTasks$=this.store.select(P),this.loveFirstChecked$=this.store.select(f),this.store.dispatch(H())}ngOnInit(){this.store.dispatch(N({destroy$:L.ZH.ng.serialize(this.destroy$)}))}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.unsubscribe(),L.ZH.ng.unsubscribe(this.destroy$)}newTask(e){this.store.dispatch(b({task:T.HL.from(e.target.value)})),e.target.value=""}remove(e){this.store.dispatch(x({task:e}))}orderLoveFirst(e){this.store.dispatch(C({loveFirst:e.checked}))}love(e){this.store.dispatch(g({task:e}))}unlove(e){this.store.dispatch(y({task:e}))}trackByMethod(e,r){return r.id}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(n.yh))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-simple-tasks"]],decls:15,vars:7,consts:[[3,"checked","change"],[4,"ngFor","ngForOf","ngForTrackBy"],["matInput","","placeholder","Type your task and press 'ENTER'...",3,"keydown.enter"],["grow",""],["matInput","",3,"value","disabled"],[3,"width",4,"ngIf"],[3,"width"],["mat-icon-button","",1,"delete",3,"click"],["mat-icon-button","",1,"favorite_border",3,"click"],["mat-icon-button","",1,"favorite",3,"click"]],template:function(e,r){1&e&&(s.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),s._uU(3,"Simple tasks"),s.qZA(),s.TgZ(4,"mat-card-subtitle"),s._uU(5,"with realtime/socket syncing"),s.qZA()(),s.TgZ(6,"mat-card-content")(7,"mat-slide-toggle",0),s.NdJ("change",function(l){return r.orderLoveFirst(l)}),s.ALo(8,"async"),s._uU(9,"Love first!"),s.qZA(),s._UZ(10,"br"),s.YNc(11,ns,10,5,"columns-container",1),s.ALo(12,"async"),s.TgZ(13,"mat-form-field")(14,"input",2),s.NdJ("keydown.enter",function(l){return r.newTask(l)}),s.qZA()()()()),2&e&&(s.xp6(7),s.Q6J("checked",s.lcZ(8,3,r.loveFirstChecked$)),s.xp6(4),s.Q6J("ngForOf",s.lcZ(12,5,r.simpleTasks$))("ngForTrackBy",r.trackByMethod))},directives:[v.a8,v.dk,v.n5,v.$j,v.dn,z.Rr,h.sg,k.a_,k.bg,k.iB,Y.KE,X.Nt,h.O5,q.lW,ss.Hw],pipes:[h.Ov],styles:[""]}),t})(),$=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-simple-tasks-app"]],decls:1,vars:0,template:function(e,r){1&e&&s._UZ(0,"app-simple-tasks")},directives:[os],styles:[""]}),t})();var is=o(26983),c=o(27565),as=o(7683),rs=o(87036),_=o(16612);const cs=(0,n.Lq)({loggedUser:""});var K=o(18801);const ms=(0,n.Lq)({simpleTasks:[],loveFirst:!1},(0,n.on)(A,(t,{simpleTasks:i})=>Object.assign(Object.assign({},t),{simpleTasks:K.cloneDeep(i)})),(0,n.on)(Z,(t,{task:i})=>Object.assign(Object.assign({},t),{simpleTasks:[...t.simpleTasks,i]})),(0,n.on)(D,(t,{task:i})=>Object.assign(Object.assign({},t),{simpleTasks:[...t.simpleTasks.filter(e=>e.id!==i.id)]})),(0,n.on)(C,(t,{loveFirst:i})=>Object.assign(Object.assign({},t),{simpleTasks:[...t.simpleTasks],loveFirst:i})),(0,n.on)(g,(t,{task:i})=>{const e=K.cloneDeep(t.simpleTasks);return e.find(({id:p})=>i.id===p).love=!0,Object.assign(Object.assign({},t),{simpleTasks:e})}),(0,n.on)(y,(t,{task:i})=>{const e=K.cloneDeep(t.simpleTasks);return e.find(({id:p})=>i.id===p).love=!1,Object.assign(Object.assign({},t),{simpleTasks:e})}));var d=o(76808),u=o(4393),J=o(53030),m=o(12777),E=o(12866),Ts=o(6568),ds=o(12038),us=o(5211),Ss=o(20761),vs=o(13004);let M=(()=>{class t{constructor(e){this.taskBar=e,this.ctrl=T.HL.ctrl}handleError(e){this.taskBar.open(null==e?void 0:e.message)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(vs.ux))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();var hs=o(78291);let ks=(()=>{class t{constructor(e,r,p){this.actions$=e,this.service=r,this.store=p,this.init=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(H),(0,d.w)(()=>(0,u.of)(U())))),this.fetchAllTasks=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(U,C),(0,J.M)(this.store.select(f)),(0,d.w)(([l,a])=>this.service.ctrl.getAll(a).received.observable.pipe((0,m.U)(S=>A({simpleTasks:S.body.rawJson})),(0,E.K)(S=>(this.service.handleError(S),(0,u.of)(I({error:S})))))))),this.addTask=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(b),(0,d.w)(({task:l})=>this.service.ctrl.create(l).received.observable.pipe((0,m.U)(a=>Z({task:a.body.rawJson})),(0,E.K)(a=>(this.service.handleError(a),(0,u.of)(j({error:a})))))))),this.deleteTask=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(x),(0,d.w)(({task:l})=>this.service.ctrl.deleteById(l.id).received.observable.pipe((0,m.U)(a=>D({task:a.body.rawJson})),(0,E.K)(a=>(this.service.handleError(a),(0,u.of)(B({error:a})))))))),this.loveTask=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(g),(0,d.w)(({task:l})=>this.service.ctrl.updateLove(l.id,!0).received.observable.pipe((0,m.U)(a=>G({task:a.body.rawJson})),(0,E.K)(a=>(this.service.handleError(a),(0,u.of)(V({error:a})))))))),this.unloveTask=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(y),(0,d.w)(({task:l})=>this.service.ctrl.updateLove(l.id,!1).received.observable.pipe((0,m.U)(a=>w({task:a.body.rawJson})),(0,E.K)(a=>(this.service.handleError(a),(0,u.of)(Q({error:a})))))))),this.realtimeChanges=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(N),(0,Ts.z)(l=>hs.iQ.Realtime.Browser.listenChangesTableEntity(T.HL).pipe((0,ds.R)(L.ZH.ng.deserialize(l.destroy$)),(0,us.b)(500),(0,J.M)(this.store.select(f)),(0,Ss.z)(([a,S])=>this.service.ctrl.getAll(S).received.observable.pipe((0,m.U)(gs=>gs.body.rawJson))),(0,m.U)(a=>A({simpleTasks:a}))))))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(c.eX),s.LFG(M),s.LFG(n.yh))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})(),Es=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[M],imports:[[h.ez,T.qX,_.u5,k.m0,n.Aw.forFeature(O,ms),c.sQ.forFeature([ks])]]}),t})();const fs=[{path:"",component:$}];let As=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[],imports:[[h.ez,T.qX,_.u5,k.m0,n.Aw.forRoot(cs,{}),c.sQ.forRoot([]),as.Qi.forRoot(),rs.FT.instrument({}),is.Bz.forChild(fs),Es]]}),t})()}}]);